{"ast":null,"code":"import { environment } from '../../environments/environment.development';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class AccountService {\n  constructor(http) {\n    this.http = http;\n  }\n  login(data) {\n    let url = environment.baseURL + 'Account/Login';\n    //this.http.post()\n    return this.http.post(url, data, {\n      headers: {\n        \"Content-Type\": 'application/json'\n      }\n    });\n  }\n  signUp(data) {\n    let url = environment.baseURL + 'Account/Create';\n    return this.http.post(url, data);\n  }\n  isAccessTokenExpired() {\n    if (localStorage.getItem(\"AccessToken\") == null) {\n      return true;\n    }\n    ;\n    var accesstoken = JSON.parse(localStorage.getItem(\"AccessToken\"));\n    let expi = new Date(accesstoken.expiresAt);\n    // let t = new Date(\"1900-03-25\")\n    // console.log(t.toLocaleDateString())\n    console.log(\"Acc \", expi);\n    console.log(\"Date \", new Date());\n    if (expi > new Date()) {\n      return false;\n    }\n    return true;\n  }\n  isUserRole(roleFromRoute) {\n    const roles = sessionStorage.getItem(\"app.roles\");\n    if (roles.includes(\",\")) {\n      if (roles === roleFromRoute) {\n        return true;\n      }\n    } else {\n      const roleArray = roles.split(\",\");\n      for (let role of roleArray) {\n        if (role === roleFromRoute) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n}\nAccountService.ɵfac = function AccountService_Factory(t) {\n  return new (t || AccountService)(i0.ɵɵinject(i1.HttpClient));\n};\nAccountService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: AccountService,\n  factory: AccountService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"AAEA,SAASA,WAAW,QAAQ,4CAA4C;;;AAMxE,OAAM,MAAOC,cAAc;EAEzBC,YAAoBC,IAAgB;IAAhB,SAAI,GAAJA,IAAI;EAAgB;EACxCC,KAAK,CAACC,IAAS;IACb,IAAIC,GAAG,GAAGN,WAAW,CAACO,OAAO,GAAG,eAAe;IAC/C;IACA,OAAO,IAAI,CAACJ,IAAI,CAACK,IAAI,CAACF,GAAG,EAAED,IAAI,EAAE;MAAEI,OAAO,EAAE;QAAE,cAAc,EAAE;MAAkB;IAAE,CAAE,CAAC;EACvF;EACAC,MAAM,CAACL,IAAS;IAEd,IAAIC,GAAG,GAAGN,WAAW,CAACO,OAAO,GAAG,gBAAgB;IAChD,OAAO,IAAI,CAACJ,IAAI,CAACK,IAAI,CAACF,GAAG,EAAED,IAAI,CAAC;EAClC;EACAM,oBAAoB;IAClB,IAAIC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC,IAAI,IAAI,EAAE;MAC/C,OAAO,IAAI;;IACZ;IACD,IAAIC,WAAW,GAAkBC,IAAI,CAACC,KAAK,CAACJ,YAAY,CAACC,OAAO,CAAC,aAAa,CAAE,CAAC;IACjF,IAAII,IAAI,GAAG,IAAIC,IAAI,CAACJ,WAAW,CAACK,SAAS,CAAC;IAC1C;IACA;IACAC,OAAO,CAACC,GAAG,CAAC,MAAM,EAAEJ,IAAI,CAAC;IACzBG,OAAO,CAACC,GAAG,CAAC,OAAO,EAAE,IAAIH,IAAI,EAAE,CAAC;IAChC,IAAID,IAAI,GAAG,IAAIC,IAAI,EAAE,EAAE;MACrB,OAAO,KAAK;;IAEd,OAAO,IAAI;EACb;EACAI,UAAU,CAACC,aAAqB;IAC9B,MAAMC,KAAK,GAAGC,cAAc,CAACZ,OAAO,CAAC,WAAW,CAAC;IACjD,IAAIW,KAAM,CAACE,QAAQ,CAAC,GAAG,CAAC,EAAE;MACxB,IAAIF,KAAK,KAAKD,aAAa,EAAE;QAC3B,OAAO,IAAI;;KAEd,MAAM;MACL,MAAMI,SAAS,GAAGH,KAAM,CAACI,KAAK,CAAC,GAAG,CAAC;MACnC,KAAK,IAAIC,IAAI,IAAIF,SAAS,EAAE;QAC1B,IAAIE,IAAI,KAAKN,aAAa,EAAE;UAC1B,OAAO,IAAI;;;;IAIjB,OAAO,KAAK;EACd;;AA3CWtB,cAAc;mBAAdA,cAAc;AAAA;AAAdA,cAAc;SAAdA,cAAc;EAAA6B,SAAd7B,cAAc;EAAA8B,YAFb;AAAM","names":["environment","AccountService","constructor","http","login","data","url","baseURL","post","headers","signUp","isAccessTokenExpired","localStorage","getItem","accesstoken","JSON","parse","expi","Date","expiresAt","console","log","isUserRole","roleFromRoute","roles","sessionStorage","includes","roleArray","split","role","factory","providedIn"],"sourceRoot":"","sources":["C:\\Users\\Asus\\Documents\\GitHub\\CarManagementClient\\src\\app\\services\\account.service.ts"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { environment } from '../../environments/environment.development';\r\nimport { TokenResponse } from '../models/TokenResponse';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AccountService {\r\n\r\n  constructor(private http: HttpClient) { }\r\n  login(data: any) {\r\n    let url = environment.baseURL + 'Account/Login';\r\n    //this.http.post()\r\n    return this.http.post(url, data, { headers: { \"Content-Type\": 'application/json' } });\r\n  }\r\n  signUp(data: any) {\r\n\r\n    let url = environment.baseURL + 'Account/Create'\r\n    return this.http.post(url, data);\r\n  }\r\n  isAccessTokenExpired() {\r\n    if (localStorage.getItem(\"AccessToken\") == null) {\r\n      return true;\r\n    };\r\n    var accesstoken: TokenResponse = JSON.parse(localStorage.getItem(\"AccessToken\")!);\r\n    let expi = new Date(accesstoken.expiresAt);\r\n    // let t = new Date(\"1900-03-25\")\r\n    // console.log(t.toLocaleDateString())\r\n    console.log(\"Acc \", expi)\r\n    console.log(\"Date \", new Date())\r\n    if (expi > new Date()) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n  isUserRole(roleFromRoute: string) {\r\n    const roles = sessionStorage.getItem(\"app.roles\");\r\n    if (roles!.includes(\",\")) {\r\n      if (roles === roleFromRoute) {\r\n        return true;\r\n      }\r\n    } else {\r\n      const roleArray = roles!.split(\",\");\r\n      for (let role of roleArray) {\r\n        if (role === roleFromRoute) {\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}